"""Python pytest script is generated by templateapp Community edition"""

from textfsm import TextFSM
from io import StringIO

template = r"""################################################################################
# Template is generated by templateapp Community Edition
# Created by  : user1
# Email       : user1@abcxyz.com
# Company     : ABC XYZ LLC
# Created date: _datetime_
################################################################################
Value title (\S*[a-zA-Z0-9]\S*( \S*[a-zA-Z0-9]\S*)*)
Value price ((\d+)?[.]?\d+)
Value genre (\w+( \w+)*)

Start
  ^Title +Price +Genre
  ^${title} +${price} +${genre} -> Record"""

test_data = """Title                   Price       Genre
XML Developer's Guide   44.95       Computer
Midnight Rain           5.95        Fantasy
Maeve Ascendant         5.95        Fantasy"""


class TestTemplate:
    def test_textfsm_template(self):
        stream = StringIO(template)
        parser = TextFSM(stream)
        rows = parser.ParseTextToDicts(test_data)
        total_rows_count = len(rows)
        assert total_rows_count > 0